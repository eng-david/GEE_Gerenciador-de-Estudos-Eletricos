{% extends "layout.html" %}

{% block title %}
{% if customerData %}
Editar Cliente
{% else %}
Cadastrar Novo Cliente
{% endif %}
{% endblock %}

{% block main %}
<script>
    function showDeleteCustomerAlert() {
        var x = document.getElementById("deletionAlert");
        x.style.display = "block"
    }
    function deleteCustomerFormSubmit(){
        document.forms['deleteForm'].submit();
    }

</script>

<div class="mb-3 container w-75">

    <form action="/customer" method="post">

        <div class="mb-3">
            <h1>
                {% if customerData %}
                Editar Cliente:
                {% else %}
                Cadastrar Novo Cliente:
                {% endif %}
            </h1>
        </div>

        <div>
            <h5>Dados de Contato:</h5>
        </div>

        <div class="mb-3">
            <label for="name" class="form-label">Nome:</label>
            <input class="form-control " name="name" required="required" placeholder="nome" type="text" {% if
                customerData %} value="{{customerData.name}}" {% endif %}>
        </div>

        <div class="mb-3">
            <label for="email" class="form-label">Email:</label>
            <input class="form-control " name="email" placeholder="email" type="text" {% if customerData %}
                value="{{customerData.email}}" {% endif %}>
        </div>

        <div class="mb-3">
            <label for="phone" class="form-label">Telefone:</label>
            <input class="form-control " name="phone" placeholder="0000-0000" type="text" {% if customerData %}
                value="{{customerData.phone}}" {% endif %}>
        </div>

        <div>
            <h5>Endereço:</h5>
        </div>

        <div class="mb-3">
            <label for="zipcode" class="form-label">CEP:</label>
            <input class="form-control " name="zipcode" placeholder="00000-000" type="text" {% if customerData %}
                value="{{customerData.zipcode}}" {% endif %}>
        </div>

        <div class="mb-3">
            <label for="state" class="form-label">Estado:</label>
            <input class="form-control " name="state" placeholder="estado" type="text" {% if customerData %}
                value="{{customerData.state}}" {% endif %}>
        </div>

        <div class="mb-3">
            <label for="city" class="form-label">Cidade:</label>
            <input class="form-control " name="city" placeholder="cidade" type="text" {% if customerData %}
                value="{{customerData.city}}" {% endif %}>
        </div>

        <div class="mb-3">
            <label for="street" class="form-label">Rua:</label>
            <input class="form-control " name="street" placeholder="rua" type="text" {% if customerData %}
                value="{{customerData.street}}" {% endif %}>
        </div>

        <div class="mb-3">
            <label for="district" class="form-label">Bairro:</label>
            <input class="form-control " name="district" placeholder="bairro" type="text" {% if customerData %}
                value="{{customerData.district}}" {% endif %}>
        </div>

        <div class="mb-3">
            <label for="number" class="form-label">Numero:</label>
            <input class="form-control " name="number" placeholder="numero" type="text" {% if customerData %}
                value="{{customerData.number}}" {% endif %}>
        </div>

        <div class="mb-3">
            <label for="complement" class="form-label">Complemento:</label>
            <input class="form-control " name="complement" placeholder="complemento" type="text" {% if customerData %}
                value="{{customerData.complement}}" {% endif %}>
        </div>

        <input name="id" type="hidden" value="{{customerData.id}}">

        <button class="btn btn-primary" type="submit">Salvar</button>
    </form>
</div>

<div class="mb-3 w-75 container" {% if not customerData %} style="display: none;" {% endif %}>
    <button class="btn btn-danger" onclick="showDeleteCustomerAlert()">Apagar Cliente</button>
</div>

<div id="deletionAlert" class="mb-3 w-75 container" style="display: none;">
    <h6>Tem certeza? o cliente será deletado.</h6>
    <a class="btn btn-danger" onclick="deleteCustomerFormSubmit()">Apagar Cliente</a>
</div>

<div>
    <form name="deleteForm" action="/customer" method="post">
        <input name="delete" type="hidden" value="{{customerData.id}}">
    </form>
</div>
{% endblock %}